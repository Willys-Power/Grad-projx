<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>
    <div class="container mt-3">
    <table class="table">
        <thead>
            <th>userNo</th>
<th>address</th>
<th>city</th>
<th>country</th>
<th>course</th>
<th>email</th>
        </thead>
        <tbody id="tbody1">

        </tbody>
    </table>
</div>

<script type="module">
// filling the table

var userNo = 0;
var tbody = document.getElementById('tbody1')

function AddItemToTable(address, city, country, course, email){
    let trow = document.createElement("tr");
    let td1 = document.createElement('td');
    let td2 = document.createElement('td');
    let td3 = document.createElement('td');
    let td4 = document.createElement('td');
    let td5 = document.createElement('td');
    let td6 = document.createElement('td');

    td1.innerHTML=++ userNo;
    td2.innerHTML= address;
    td3.innerHTML= city;
    td4.innerHTML= country;
    td5.innerHTML= course;
    td6.innerHTML= email;

    trow.appendChild(td1);
    trow.appendChild(td2);
    trow.appendChild(td3);
    trow.appendChild(td4);
    trow.appendChild(td5);
    trow.appendChild(td6);

    tbody.appendChild(trow);
}

function AddAllItemsToTable (TheUser){
    userNo=0;
    tbody.innerHTML="";
    TheUser.forEach (element => {
        AddItemToTable (element.address, element.city, element.country, element.course, element.email);
    });
}

import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.6/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAuuAMrOqkTix4hgvE4gG3MtA44ZYQWg2k",
    authDomain: "mindworxgrad.firebaseapp.com",
    databaseURL: "https://mindworxgrad-default-rtdb.firebaseio.com",
    projectId: "mindworxgrad",
    storageBucket: "mindworxgrad.appspot.com",
    messagingSenderId: "921423385255",
    appId: "1:921423385255:web:1e0ac2a0df745193e34182",
    measurementId: "G-D1HH02SNW3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

  import { getDatabase, ref, child, onValue, get }
  from "https://www.gstatic.com/firebasejs/9.6.6/firebase-database.js"

  const db = getDatabase();

//Getting All DATA

function GetAllDataOnce(){
    const dbRef = ref(db);

    get(child(dbRef, "Users"))
    .then((snapshot) => {
        var users = [];
        snapshot.forEach(childSnapshot => {
users.push(childSnapshot.val());
        });

        AddAllItemsToTable(users);
    });
} 

///getting data real time

function GetAllDataRealTime(){
    const dbRef = ref(db, "Users");
onValue(dbRef, (snapshot) =>{
    var users = [];
        snapshot.forEach(childSnapshot => {
users.push(childSnapshot.val());
        });

        AddAllItemsToTable(users);
})
   
} 

window.onload = GetAllDataRealTime;

</script>

</body>
</html>